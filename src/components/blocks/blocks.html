<section>
    <div class="row">
        <div class="col-xs-12 col-md-12">
            <div class="page-header">
                <h1>Blocks <small data-ng-if="vm.blocks.length > 1">{{vm.blocks[0].height}} &#8594; {{vm.blocks[vm.blocks.length - 1].height}}</small></h1><hr>
            </div>

            <div class="table-responsive">
                <table class="table table-hover table-striped">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th class="text-right">Height</th>
                            <th class="text-right hidden-xs">Timestamp</th>
                            <th class="text-right hidden-xs">Transactions</th>
                            <th class="text-right hidden-xs hidden-sm">Generated by</th>
                            <th class="text-right hidden-xs hidden-sm">Amount ({{$root.currency.symbol}})</th>
                            <th class="text-right hidden-xs hidden-sm">Forged ({{$root.currency.symbol}})</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-ng-if="loading">
                            <td colspan="7">Waiting for blocks <i class="fa fa-spinner fa-spin"></i></td>
                        </tr>
                        <tr data-ng-repeat='block in vm.blocks track by block.id'>
                            <td><a class="ellipsis" href="/block/{{block.id}}">{{block.id}}</a></td>
                            <td class="text-right"><span class="ellipsis">{{block.height}}</span></td>
                            <td class="text-right hidden-xs"><span class="ellipsis">{{block.timestamp | timestamp}}</span></td>
                            <td class="text-right hidden-xs">{{block.transactionsCount}}</td>
                            <td class="text-right hidden-xs hidden-sm">
                                <a data-account-href="block.delegate">{{block.delegate.username || block.generator}}</a>
                            </td>
                            <td class="text-right hidden-xs hidden-sm">{{block.totalAmount | currency:$root.currency:$root.decimalPlaces}}</td>
                            <td class="text-right hidden-xs hidden-sm">{{block.totalForged | currency:$root.currency}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div data-ng-if="vm.pagination.more || vm.pagination.before">
                <a class="btn btn-primary" href="/blocks/{{vm.pagination.previousPage}}" data-ng-if="vm.pagination.before">Previous page</a>
                <a class="btn btn-primary" href="/blocks/{{vm.pagination.nextPage}}" data-ng-if="vm.pagination.more && vm.pagination.nextPage != 0">Next page</a>
            </div>
        </div>
    </div>
    <h2 class="text-center text-muted" data-ng-if="!loading && !vm.blocks.length">No blocks yet.</h2>
</section>
